<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="view_account_move_iban_form" model="ir.ui.view">
        <field name="name">view.account.move.iban.form</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="account_common_mixin.view_account_move_mixin_form"/>
        <field name="arch" type="xml">

            <xpath expr="//group[@name='mixin']" position="replace"></xpath>

            <!-- New fields update -->
            <xpath expr="//page[last()]" position="after">
                <page
                    name="iban_to_print"
                    string="IBAN in stampa"
                    attrs="{'invisible': [('type', 'not in', ['out_invoice', 'out_refund', 'in_invoice', 'in_refund'])]}"
                >
                    <field name="type" invisible="1"/>
                    <group>
                        <field name="bank_2_print_selector"/>
                        <field
                            name="counterparty_bank_id"
                            attrs="{'invisible': [('bank_2_print_selector', '!=', 'partner')]}"
                        />
                        <field
                            name="company_bank_id"
                            attrs="{'invisible': [('bank_2_print_selector', '!=', 'company')]}"
                        />
                    </group>
                </page>
            </xpath>

            <!-- partner_bank_id invisible -->
            <field name="partner_bank_id" position="attributes">
                <attribute name="attrs">
                    {'readonly': [('bank_2_print_selector', '=', '')]}
                </attribute>
            </field>

        </field>
    </record>

</odoo>

