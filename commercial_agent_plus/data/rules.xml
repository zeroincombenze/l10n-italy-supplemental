<?xml version="1.0" encoding="utf-8"?>
<odoo>
<data noupdate="0">
    <!--AGENT-->
    <record id="sale_order_agent" model="ir.rule">
        <field name="name">Sale Order Agent</field>
        <field name="model_id" ref="sale.model_sale_order"/>
        <field name="domain_force">
        [('commercial_agent_id','=',user.id)]
        </field>
        <field name="groups" eval="[(4, ref('commercial_agent_plus.commercial_agent_plus_agent_group'))]"/>
    </record>
    <record id="sale_order_line_agent" model="ir.rule">
        <field name="name">Sale Order Line Agent</field>
        <field name="model_id" ref="sale.model_sale_order_line"/>
        <field name="domain_force">
        [('order_id.commercial_agent_id','=',user.id)]
        </field>
        <field name="groups" eval="[(4, ref('commercial_agent_plus.commercial_agent_plus_agent_group'))]"/>
    </record>
    <record id="commission_agent" model="ir.rule">
        <field name="name">Commission Agent</field>
        <field name="model_id" ref="commercial_agent_plus.model_commercial_agent_commission"/>
        <field name="domain_force">
        [('agent_id.user_ids','=',user.id)]
        </field>
        <field name="groups" eval="[(4, ref('commercial_agent_plus.commercial_agent_plus_agent_group'))]"/>
    </record>
    <record id="product_template_agent" model="ir.rule">
        <field name="name">Product Template Agent</field>
        <field name="model_id" ref="product.model_product_template"/>
        <field name="domain_force">
        [('commercial_agent_salable','=',True)]
        </field>
        <field name="groups" eval="[(4, ref('commercial_agent_plus.commercial_agent_plus_agent_group'))]"/>
    </record>
    <record id="product_product_agent" model="ir.rule">
        <field name="name">Product Product Agent</field>
        <field name="model_id" ref="product.model_product_product"/>
        <field name="domain_force">
        [('commercial_agent_salable','=',True)]
        </field>
        <field name="groups" eval="[(4, ref('commercial_agent_plus.commercial_agent_plus_agent_group'))]"/>
    </record>
    <record id="sale_commission_agent" model="ir.rule">
        <field name="name">Sale Commission Agent</field>
        <field name="model_id" ref="commercial_agent_plus.model_commercial_agent_sale_commission"/>
        <field name="domain_force">
        [('agent_id','=',user.id)]
        </field>
        <field name="groups" eval="[(4, ref('commercial_agent_plus.commercial_agent_plus_agent_group'))]"/>
    </record>
    <record id="settlement_agent" model="ir.rule">
        <field name="name">Settlement Agent</field>
        <field name="model_id" ref="commercial_agent_plus.model_commercial_agent_commission_settlement"/>
        <field name="domain_force">
        [('agent_id','=',user.id)]
        </field>
        <field name="groups" eval="[(4, ref('commercial_agent_plus.commercial_agent_plus_agent_group'))]"/>
    </record>
    <!--Manager-->
    <record id="sale_order_area_manager" model="ir.rule">
        <field name="name">Sale Order Manager</field>
        <field name="model_id" ref="sale.model_sale_order"/>
        <field name="domain_force">
        ['|',
        ('commercial_agent_id','=',user.id),
        ('commercial_agent_id.partner_id.commercial_agent_manager_id','=',user.id)]
        </field>
        <field name="groups" eval="[(4, ref('commercial_agent_plus.commercial_agent_plus_manager_group'))]"/>
    </record>
    <record id="sale_order_line_area_manager" model="ir.rule">
        <field name="name">Sale Order Line Manager</field>
        <field name="model_id" ref="sale.model_sale_order_line"/>
        <field name="domain_force">
        ['|',
        ('order_id.commercial_agent_id','=',user.id),
        ('order_id.commercial_agent_id.partner_id.commercial_agent_manager_id','=',user.id)]
        </field>
        <field name="groups" eval="[(4, ref('commercial_agent_plus.commercial_agent_plus_manager_group'))]"/>
    </record>
    <record id="commission_area_manager" model="ir.rule">
        <field name="name">Commission Manager</field>
        <field name="model_id" ref="commercial_agent_plus.model_commercial_agent_commission"/>
        <field name="domain_force">
        ['|',
        ('agent_id.user_ids','=',user.id),
        ('agent_id.commercial_agent_manager_id','=',user.id)]
        </field>
        <field name="groups" eval="[(4, ref('commercial_agent_plus.commercial_agent_plus_manager_group'))]"/>
    </record>
    <record id="settlement_area_manager" model="ir.rule">
        <field name="name">SEttlement Manager</field>
        <field name="model_id" ref="commercial_agent_plus.model_commercial_agent_commission"/>
        <field name="domain_force">
        ['|',
        ('agent_id','=',user.id),
        ('agent_id.parent_id.commercial_agent_manager_id','=',user.id)]
        </field>
        <field name="groups" eval="[(4, ref('commercial_agent_plus.commercial_agent_plus_manager_group'))]"/>
    </record>
    <!--AGENT ADMIN-->
    <record id="commission_agent_admin" model="ir.rule">
        <field name="name">Commission Agent Admin</field>
        <field name="model_id" ref="commercial_agent_plus.model_commercial_agent_commission"/>
        <field name="domain_force">
        [(1,'=',1)]
        </field>
        <field name="groups" eval="[(4, ref('commercial_agent_plus.commercial_agent_plus_agent_admin_group'))]"/>
    </record>
     <record id="settlement_admin" model="ir.rule">
        <field name="name">Settlement Admin</field>
        <field name="model_id" ref="commercial_agent_plus.model_commercial_agent_commission_settlement"/>
        <field name="domain_force">
        [(1,'=',1)]
        </field>
        <field name="groups" eval="[(4, ref('commercial_agent_plus.commercial_agent_plus_agent_admin_group'))]"/>
    </record>

    <!-- Multi Company -->
    <!-- Shareable Records -->
    <record model="ir.rule" id="commercial_agent_area_company_rule">
        <field name="name">Commercial Agent Area: multi-company</field>
        <field name="model_id" ref="commercial_agent_plus.model_commercial_agent_area"/>
        <field name="global" eval="True"/>
        <field name="domain_force">
            ['|', ('company_id', '=', False), ('company_id','child_of',[user.company_id.id])]
        </field>
    </record>
    <record model="ir.rule" id="commercial_agent_commission_company_rule">
        <field name="name">Commercial Agent Commission: multi-company</field>
        <field name="model_id" ref="commercial_agent_plus.model_commercial_agent_commission"/>
        <field name="global" eval="True"/>
        <field name="domain_force">
            ['|', ('company_id', '=', False), ('company_id','child_of',[user.company_id.id])]
        </field>
    </record>
    <record model="ir.rule" id="commercial_agent_sale_commission_company_rule">
        <field name="name">Commercial Agent Sale Commission: multi-company</field>
        <field name="model_id" ref="commercial_agent_plus.model_commercial_agent_sale_commission"/>
        <field name="global" eval="True"/>
        <field name="domain_force">
            ['|', ('company_id', '=', False), ('company_id','child_of',[user.company_id.id])]
        </field>
    </record>
    <record model="ir.rule" id="commercial_agent_sale_line_commission_company_rule">
        <field name="name">Commercial Agent Sale Line Commission: multi-company</field>
        <field name="model_id" ref="commercial_agent_plus.model_commercial_agent_sale_line_commission"/>
        <field name="global" eval="True"/>
        <field name="domain_force">
            ['|', ('company_id', '=', False), ('company_id','child_of',[user.company_id.id])]
        </field>
    </record>
    <record model="ir.rule" id="commercial_agent_settlement_company_rule">
        <field name="name">Commercial Agent Settlement: multi-company</field>
        <field name="model_id" ref="commercial_agent_plus.model_commercial_agent_commission_settlement"/>
        <field name="global" eval="True"/>
        <field name="domain_force">
            ['|', ('company_id', '=', False), ('company_id','child_of',[user.company_id.id])]
        </field>
    </record>
</data>
</odoo>