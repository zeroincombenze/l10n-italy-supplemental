<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- Standard view -->
    <record id="account_invoice_entry_dates.view_account_move_due_dates_form" model="ir.ui.view">
        <field name="name">view.account.move.due.dates.form</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="account.view_move_form"></field>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='journal_id']" position="after">
                <!-- This field is used only to load the journal_type field so it can be used in the attrs expression of the <page> tag -->
                <field name="journal_type" groups="base.group_no_one"/> <!-- This field is visible only in debug mode thanks to the groups="base.group_no_one" setting -->
            </xpath>

            <xpath expr="//field[@name='journal_id']" position="attributes">
                <attribute name="invisible">0</attribute>
            </xpath>

            <xpath expr="/form/sheet/notebook/page[1]" position="after">

                <page string="Prima nota" name="accountbrief" attrs="{'invisible': [ ('journal_type', 'not in', ['sale', 'sale_refund', 'purchase', 'purchase_refund']) ] }">

                    <field name="accountbrief_ids" readonly="1">
                        <tree create="false" delete="false">
                            <field name="account_id"/>
                            <field name="partner_id"/>
                            <field name="debit"/>
                            <field name="credit"/>
                            <field name="accrual_date_start"/>
                            <field name="accrual_date_end"/>
                        </tree>
                    </field>
                    <button
                           string="Aggiorna prima nota"
                           class="oe_highlight oe_edit_only"
                           type="object" name="action_accountbrief_update"
                           attrs="{ 'invisible': [ ('id', '=', False) ] }"
                           />
                </page>

                <page string="Riepilogo IVA" name="vatbrief" attrs="{'invisible': [ ('journal_type', 'not in', ['sale', 'sale_refund', 'purchase', 'purchase_refund']) ] }">

                    <field name="vatbrief_ids" readonly="1">
                        <tree create="false" delete="false">
                            <field name="base_amount_total" sum="Totale"/>
                            <field name="vat_code_rel"/>
                            <field name="vat_total" sum="Totale"/>
                            <field name="vat_det" sum="Totale"/>
                            <field name="vat_no_det" sum="Totale"/>
                            <field name="display_name_rel"/>
                        </tree>
                    </field>
                    <button
                           string="Aggiorna riepilogo IVA"
                           class="oe_highlight oe_edit_only"
                           type="object" name="action_vatbrief_update"
                           attrs="{ 'invisible': [ ('id', '=', False) ] }"
                           />
                </page>
            </xpath>

        </field>
    </record>

</odoo>

